## Codebase Patterns
- Tauri commands are organized in separate modules (e.g., `storage/todo.rs`, `enhancer.rs`)
- Commands return `Result<T, String>` for error handling
- Module must be declared in `lib.rs` and command added to `invoke_handler`
- Use `shell_escape` pattern (single quotes with escaped inner quotes) for shell command arguments

---

## 2026-01-14 - US-001
- What was implemented:
  - Created `src-tauri/src/enhancer.rs` with `enhance_prompt` Tauri command
  - Command executes Claude CLI via `echo 'text' | claude -p 'instruction'`
  - Proper shell escaping using single-quote wrapping with escaped inner quotes
  - Error handling for empty input, CLI execution failures, and empty responses
  - Registered module and command in `lib.rs`
- Files changed:
  - `src-tauri/src/enhancer.rs` (new)
  - `src-tauri/src/lib.rs` (modified - added module and command)
- **Learnings for future iterations:**
  - Commands don't need State if they don't access database
  - Shell escaping with single quotes is safer than double quotes (no variable expansion)
  - The `ENHANCE_INSTRUCTION` constant contains the system prompt for the CLI
---

## 2026-01-14 - US-002
- What was implemented:
  - Created `src/plugins/prompt-enhancer/useEnhancer.ts` hook
  - Hook exposes: enhance(text), result, isLoading, error, reset()
  - Calls invoke('enhance_prompt', { text }) from Tauri
  - Automatically copies result to clipboard via navigator.clipboard.writeText()
  - Shows toast notification "Copiado!" on success, "Falha ao melhorar prompt" on error
- Files changed:
  - `src/plugins/prompt-enhancer/useEnhancer.ts` (new)
- **Learnings for future iterations:**
  - Plugin hooks follow same pattern as useTodoStorage - useState + useCallback
  - toast from 'sonner' is available for user feedback
  - invoke from '@tauri-apps/api/core' is the standard way to call Tauri commands
---

## 2026-01-14 - US-003
- What was implemented:
  - Created `src/plugins/prompt-enhancer/WaveAnimation.tsx` component
  - Multiple overlapping SVG wave paths with different frequencies and amplitudes
  - CSS @keyframes animations: wave-flow (horizontal movement), wave-pulse (opacity breathing), gradient-shift (subtle color changes)
  - Ethereal aesthetic with white/blue gradient and gaussian blur filter
  - Centered in container, works with dark theme
- Files changed:
  - `src/plugins/prompt-enhancer/WaveAnimation.tsx` (new)
- **Learnings for future iterations:**
  - SVG animations can use inline `<style>` tags within the component for self-contained animations
  - CSS custom properties (--wave-opacity) can be set inline and used in keyframes
  - useMemo for static wave configuration prevents re-renders
  - WavePath is a mini-component following the codebase pattern (defined after main component)
---

## 2026-01-14 - US-004
- What was implemented:
  - Created `src/plugins/prompt-enhancer/PromptEnhancerPlugin.tsx` main component
  - Textarea for writing/pasting messy prompts
  - Enhance button with Sparkles icon from lucide-react
  - Ctrl+Enter shortcut to trigger enhancement
  - Ctrl+Backspace shortcut to clear all text
  - During processing: textarea hides, WaveAnimation shows centered with "Melhorando seu prompt..." text
  - On completion: textarea returns with the enhanced result
  - Toast "Copiado!" handled by useEnhancer hook
  - Mini-components: PromptEnhancerLoading, PromptEnhancerInput, PromptEnhancerHints
- Files changed:
  - `src/plugins/prompt-enhancer/PromptEnhancerPlugin.tsx` (new)
- **Learnings for future iterations:**
  - Use PluginHeader component with title, icon, and onBack prop
  - Keyboard hint display with <kbd> tags styled with Tailwind
  - forwardRef pattern not needed - can pass ref directly via props with RefObject type
---
