# Tasks Plugin - PRD Progress

## Overview
- **Total tasks**: 15
- **Completed**: 3
- **In Progress**: 0
- **Remaining**: 12

## Fase 1: Rename "Todo" to "Tasks" (9 tasks)
- [x] 1.1: Backend - Rename todo module to tasks and update types
- [x] 1.2: Backend - Update store and storage with data migration
- [x] 1.3: Backend - Rename commands and update error messages
- [ ] 1.4: Backend - Update lib.rs, logging.rs and paths.rs
- [ ] 1.5: Frontend - Rename files and update types
- [ ] 1.6: Frontend - Update hook (useTasksStorage.ts)
- [ ] 1.7: Frontend - Update main component (TasksPlugin.tsx)
- [ ] 1.8: Frontend - Update manifest, registry and navigation hook
- [ ] 1.9: Verify Phase 1 - Manual testing of rename

## Fase 2: Implement Subtasks (6 tasks)
- [ ] 2.1: Backend - Add Subtask type and update Task struct
- [ ] 2.2: Backend - Add subtask commands
- [ ] 2.3: Frontend - Add Subtask types and update Task interface
- [ ] 2.4: Frontend - Add subtask operations to hook
- [ ] 2.5: Frontend - Add subtask UI components (use frontend-design skill)
- [ ] 2.6: Verify Phase 2 - Manual testing of subtasks

## Notes
- Fase 1 must be completed before starting Fase 2
- Tasks 1.5-1.7 don't commit individually (batch commit at 1.8)
- Tasks 2.5 requires frontend-design skill for UI implementation
- Test tasks (1.9, 2.6) are manual verification steps

---

## 2026-01-21 06:45 - Fase 1.1
- What was implemented: Renamed todo module folder to tasks, updated mod.rs, renamed all types in types.rs (Todo→Task, TodoData→TasksData, TodoWithTags→TaskWithTags, TodoDataResponse→TasksDataResponse, RecentTodo→RecentTask, todo_count→task_count, recent_todos→recent_tasks)
- Files changed:
  - src-tauri/src/plugins/todo/ → src-tauri/src/plugins/tasks/ (folder rename)
  - src-tauri/src/plugins/mod.rs
  - src-tauri/src/plugins/tasks/types.rs
- **Learnings for future iterations:**
  - Patterns discovered: Rust serde uses camelCase for JSON serialization via `#[serde(rename_all = "camelCase")]`
  - Gotchas encountered: The TasksData struct now uses `tasks: Vec<Task>` instead of `todos: Vec<Todo>` - storage.rs and commands.rs need to be updated to use `.tasks` field access
  - Useful context: The backend rename is split into 4 tasks (1.1-1.4) to allow incremental commits; cargo check will fail until all 4 are done

## 2026-01-21 06:47 - Fase 1.2
- What was implemented: Updated mod.rs (TodoStore→TasksStore, init_todo_store()→init_tasks_store(), tracing target to "tasks"), updated storage.rs (get_todo_dir()→get_tasks_dir(), paths to tasks/tasks.json, migration from old todo/todo.json, type references to TasksData/Task)
- Files changed:
  - src-tauri/src/plugins/tasks/mod.rs
  - src-tauri/src/plugins/tasks/storage.rs
- **Learnings for future iterations:**
  - Patterns discovered: Migration logic follows priority order: new JSON → old JSON → SQLite → default. Each migration cleans up old files.
  - Gotchas encountered: The `data.todos` field is now `data.tasks` - commands.rs needs `.tasks` not `.todos` for field access
  - Useful context: Old todo directory is removed after migration using remove_dir_all, with graceful error handling if removal fails

## 2026-01-21 06:50 - Fase 1.3
- What was implemented: Renamed all commands and updated error messages in commands.rs (todo_get_by_folder→tasks_get_by_folder, todo_create→tasks_create, todo_update_status→tasks_update_status, todo_delete→tasks_delete, todo_set_tags→tasks_set_tags), updated all TodoStore→TasksStore references, renamed internal variables (folder_todos→folder_tasks, sorted_todos→sorted_tasks), updated data field access (.todos→.tasks), updated error messages ("Todo not found"→"Task not found")
- Files changed:
  - src-tauri/src/plugins/tasks/commands.rs
- **Learnings for future iterations:**
  - Patterns discovered: Commands follow a consistent pattern: get State<TasksStore>, read/write data, validate, mutate, save_to_json(), return Result
  - Gotchas encountered: The parameter name `todo_id` in tasks_set_tags was renamed to `task_id` for consistency
  - Useful context: cargo check will still fail after this task because lib.rs references the old command names - this is expected until task 1.4 completes
